<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100..900;1,100..900&display=swap"
      rel="stylesheet"
    />

    <title>Javascript Kertaus</title>

    <style>
      body {
        font-family: "Roboto", serif;
        font-optical-sizing: auto;
        font-weight: normal;
        font-style: normal;
        font-variation-settings: "wdth" 100;
      }
      main {
        max-width: 700px;
        margin: auto;
        margin-bottom: 50px;
      }
      h3 {
        margin-top: 30px;
        margin-bottom: 20px;
      }
      .graybox {
        background-color: rgb(239, 239, 239);
        padding: 10px;
        max-width: 200px;
      }
    </style>

    <!-- <script src="js/esim.css" defer></script> -->
  </head>

  <body>
    <main>
      <h1>Javascript harjoittelu</h1>

      <h3>BOM</h3>

      <p>
        BOM (Browser Object Model) on selainympäristön rakenne, joka
        mahdollistaa selaimen tarjoamien toiminnallisuuksien käytön JavaScriptin
        avulla. Sen kautta voidaan käsitellä esimerkiksi selainikkunaa (window),
        URL-osoitetta (location), selaushistoriaa (history), evästeitä
        (document.cookie) ja muita selaimen resursseja. BOM ei ole osa HTML- tai
        DOM-standardeja, mutta se on keskeinen osa web-sovellusten kehittämistä.
      </p>

      <ul>
        <li>
          <a href="https://www.w3schools.com/js/js_window.asp" target="_blank"
            >Javascript Window</a
          >
        </li>
        <li>
          <a
            href="https://www.w3schools.com/js/js_ex_browser.asp"
            target="_blank"
            >JavaScript Browser Objects Examples</a
          >
        </li>
      </ul>

      <p>Avaa console ja katso miten tutkimme selainta.</p>

      <script>
        // // BOM tiedon hakua
        // window.console.log("Moikka maailma!");
        // console.log('Moikka taas!"');
        // console.log("Moikka", 13);

        // const name = "Olli";
        // let age = 35;

        // let hello = "Moikka " + name;
        // console.log(hello);

        // // merkkijonoliteraali
        // let helloName = `Moro. Minun nimeni on ${name}. Ikäni on ${age}.`;
        // console.log(helloName);

        // // selainikkunan koko
        // let width = window.innerWidth;
        // let height = window.innerHeight;

        // let wh = `Selainikkunan leveys on ${width} ja korkeus ${height}.`;
        // console.log(wh);
        // console.log(window.innerWidth);
        // console.log("Ikkunan leveys on", width);

        // alert("alert", width);
        // let answer = confirm("confirm");
        // if (answer) {
        //   console.log("Käyttäjä jatkaa");
        // } else {
        //   console.log("Käyttäjä perui");
        // }
        // console.log(answer);
        // let p = prompt();
        // console.log(p);
      </script>

      <h3>DOM</h3>

      <p>
        DOM (Document Object Model) on selainympäristössä käytettävä
        ohjelmointirajapinta, joka edustaa verkkosivua puumaisena rakenteena.
        Sen avulla JavaScript voi lukea ja muokata HTML-dokumenttien sisältöä,
        rakennetta ja tyylejä dynaamisesti. DOM tekee verkkosivusta
        interaktiivisen, mahdollistaen esimerkiksi elementtien lisäämisen,
        poistamisen, tyylien muuttamisen ja käyttäjän tapahtumiin reagoimisen.
      </p>

      <img
        src="https://www.w3schools.com/js/pic_htmltree.gif"
        alt="DOM"
        width="500"
      />

      <p>
        <a href="https://www.w3schools.com/jsref/default.asp" target="_blank"
          >JavaScript and HTML DOM</a
        >
      </p>

      <h3>Miten löydät, muokkaat ja lisäät elementtejä DOMissa</h3>

      <p>
        Elementtien valinta ja manipulointi tarkoittaa HTML-elementtien
        etsimistä ja muokkaamista DOM-puusta. Valinta tapahtuu esimerkiksi ID:n,
        luokan tai tunnisteen perusteella, ja manipuloinnin avulla voidaan
        muuttaa elementtien sisältöä, tyylejä tai rakenteita. Katso esimerkki
        alta:
      </p>

      <div class="graybox">
        <h4 id="otsikko">H4 Otsikko, vaihda tämä</h4>

        <ul class="fruitlist">
          <li>Omena</li>
          <li>Banaani</li>
          <li class="fruit">Appelsiini</li>
        </ul>
      </div>

      <script>
        // Vaihdetaan h4 otsikon sisältö ja värjätään tausta
        // Vaihda tekstisisältö esim. Hedelmälista

        // 1. Etsi ominaisuus
        // https://www.w3schools.com/jsref/dom_obj_document.asp

        const heading4 = document.getElementById("otsikko");
        console.log(heading4.innerHTML);

        const omena = document.querySelectorAll(".fruitlist > li");
        console.log(omena);

        // 2. Elementin manipulointi
        // https://www.w3schools.com/jsref/dom_obj_all.asp

        heading4.innerText = "Hedelmälista";

        // 3. Tyylin muokkaus
        // https://www.w3schools.com/jsref/dom_obj_style.asp

        heading4.style.color = "brown";
        heading4.style.padding = "10px";

        // 4. Etsi nyt Appelsiini ja tee siitä linkki joka vie sinut
        // sivulle https://fi.wikipedia.org/wiki/Appelsiini

        const fruit = document.querySelector(".fruit");
        console.log(fruit.outerHTML);
        fruit.innerHTML = `<a href="https://fi.wikipedia.org/wiki/Appelsiini" target="_blank">Appelsiini</a>`;

        // 5. Lisätään nyt listaan uusi LI elementti "Mango"

        const fruitList = document.querySelector(".fruitlist");

        //luodaan uusi tyhjä li-elementti
        const newFruit = document.createElement("li");
        console.log(newFruit);
        newFruit.innerText = "Mango";
        fruitList.appendChild(newFruit);

        // TODO

        // Etsitään nyt kaikki hedelmät ja tulostetaan konsoliin
        // https://www.w3schools.com/js/js_loop_forof.asp
        // TAI
        // https://www.w3schools.com/js/js_loop_for.asp
        // TAI
        // https://www.w3schools.com/jsref/jsref_foreach.asp
      </script>

      <h3>Tapahtumankuuntelijat - lisääminen ja poistaminen</h3>

      <p>
        Tapahtumankuuntelija (event listener) on mekanismi, joka reagoi
        käyttäjän tai sovelluksen tapahtumiin, kuten klikkauksiin,
        näppäinpainalluksiin tai sivun latautumiseen. Se liitetään
        HTML-elementtiin, ja sen avulla voidaan suorittaa tietty funktio
        tapahtuman tapahtuessa.
      </p>

      <ul>
        <li>
          <a
            href="https://www.w3schools.com/js/js_htmldom_eventlistener.asp"
            target="_blank"
            >Event Listeners</a
          >
        </li>
        <li>
          <a
            href="https://www.w3schools.com/jsref/dom_obj_event.asp"
            target="_blank"
            >DOM events</a
          >
        </li>
      </ul>

      <p>1. Kerrataan ensin funktioiden rakenne, katso koodista</p>

      <p>
        <a
          href="https://www.w3schools.com/js/js_arrow_function.asp"
          target="_blank"
          >Arrow Function</a
        >
      </p>

      <script>
        // JS funktiot

        // perinteinen funktiomäärittely
        function greet(name) {
          console.log(`Moi ${name}, olen funktiossa.`);
          console.log("Moi", name);
        }
        greet("Olli");

        // function expression. Funtio joka on anonyymi mutta tallennetaan muuttujaan
        const greet2 = function (name) {
          console.log("Moi taas,", name + ".", "Function expression");
        };

        greet2("Seppo");

        // arrow funktio / nuolifunktio, edellistä yksikertaisempi ja lyhyempi
        const greet3 = (name) => {
          console.log("Moi kolmannen kerran,", name + ".", "Arrow function.");
        };

        greet3("Pasi");
      </script>

      <p>2. Lisätään nappuloille kuuntelijat</p>

      <button id="btn">Varoitus 1</button>
      <button id="btn2">Varmista 1</button>
      <br />
      <button id="btn3">Vaihda taustaväriä</button>
      <button id="btn4">Avaa uuteen ikkunaan</button>

      <script>
        // Etsitään molemmat nappulat DOMista ja tallennetaan muuttujaan
        const btn = document.getElementById("btn");
        const btn2 = document.querySelector("#btn2");
        const btn3 = document.getElementById("btn3");
        const btn4 = document.getElementById("btn4");

        let v = 0;

        // Funktio: Alertin luonti painikkeen klikkauksen perusteella
        function warning(e) {
          alert("Klikkasit vaarallista nappia");
        }

        btn.addEventListener("click", warning);

        btn2.addEventListener("click", () => {
          confirm("Klikkasit vaarallista nappia nro 2.");
          btn2.style.color = "red";
        });

        // Funktio: vaihtaa taustavärin kahden vaihtoehdon välillä
        btn3.addEventListener("click", () => {
          if (v == 0) {
            document.body.style.background = "pink";
            v = 1;
            console.log(v);
          } else if (v == 1) {
            document.body.style.background = "";
            v = 0;
            console.log(v);
          }
        });

        // Funktio: avataan uusi ikkuna
      </script>

      <p>3. Mouse Events / Tutkitaan hiiren klikkauksia</p>

      <button id="btn5">Klikkaa eri hiiren nappuloilla tutkiaksesi</button>

      <script>
        // Mitä kolmesta hiiren nappulasta painettiin? Tutkitaan mousedown eventtiä.
        // Mitä kolmesta hiiren nappulasta painettiin? Tutki eventtiä.
        ////////////////////////////

        let btn5 = document.querySelector("#btn5");

        btn5.addEventListener("mousedown", (event) => {
          console.log(event);
          if (event.button == 0) {
            console.log("Left button");
          } else if (event.button == 1) {
            console.log("Middle button");
          } else if (event.button == 2) {
            console.log("Right button");
          }
        });
      </script>

      <p>4. Key events / Näppäimistön painikkeiden eventit</p>

      <p>Paina kirjainta V niin saat värjättyä tausta violetiksi</p>

      <script>
        // Näppäimistön eventit

        // Näppäimistö + näppäinyhdistelmät
        /////////////////////////////////////

        window.addEventListener("keydown", (event) => {
          if (event.key == "v") {
            document.body.style.background = "violet";
          }
        });
        window.addEventListener("keyup", (event) => {
          if (event.key == "v") {
            document.body.style.background = "";
          }
        });
      </script>

      <h3>Prevent Default / Estä perus käyttäytyminen</h3>

      <a id="link" href="https://developer.mozilla.org/">MDN</a>

      <script>
        // Estetään linkin normaali toiminta
        let link = document.querySelector("#link");
        link.addEventListener("click", (event) => {
          console.log(event);

          console.log("Nope. Ei onnistu.");
          event.preventDefault();
        });
      </script>

      <h3>Prevent Default / Estä perus käyttäytyminen FORMeissa</h3>

      <p>
        <a href="https://www.w3schools.com/html/html_forms.asp" target="_blank"
          >Forms</a
        >
      </p>

      <form id="form" action="">
        <label for="fname">Etunimi:</label>
        <input type="text" id="fname" name="fname" value="John" required />
        <label for="lname">Sukunimi:</label>
        <input type="text" id="lname" name="lname" value="Doe" />
        <input type="submit" value="Submit" />
      </form>

      <script>
        const fnameValue = document.getElementById("fname");
        const lnameValue = document.querySelector("#lname");

        // Estetään formin normaalitoiminta ja pomitaan arvot formista JSn avulla jatkokäsittelyä varten
        const form = document.getElementById("form");

        form.addEventListener("submit", (event) => {
          event.preventDefault();
          console.log(event);

          console.log(fnameValue.value, lnameValue.value);
        });
      </script>
    </main>
    <!-- <script src="js/main.js"></script> -->
  </body>
</html>
